# Generated by CogSol 0.2.0 on 2026-01-15 10:59
from cogsol.db import migrations


class Migration(migrations.Migration):
    initial = False
    dependencies = [('agents', '0002_auto_20260115_1042')]
    operations = [
        migrations.AlterField(model_name='CogSolScaffoldGenerator', name='__code__', value='@tool_params(\n    component_type={\n        "description": "Type of component to generate: \'agent\', \'tool\', \'retrieval_tool\', \'faq\', \'fixed_response\', \'lesson\', \'topic\', \'metadata_config\', \'ingestion_config\', or \'retrieval\'",\n        "type": "string",\n        "required": True\n    },\n    name={\n        "description": "Name for the component (e.g., \'CustomerSupport\', \'ProductSearch\'). Will be used as class name.",\n        "type": "string",\n        "required": True\n    },\n    description={\n        "description": "Brief description of what this component does. Used in docstrings and description fields.",\n        "type": "string",\n        "required": False\n    },\n    extra_options={\n        "description": "Optional JSON string with extra options. For tools: parameters list. For agents: tool names, temperature. For retrievals: topic name, num_refs.",\n        "type": "string",\n        "required": False\n    }\n)\ndef run(self, chat=None, data=None, secrets=None, log=None, component_type: str = "", name: str = "", description: str = "", extra_options: str = ""):\n    """\n    component_type: The type of CogSol component to generate.\n    name: The name for the new component class.\n    description: Description of what the component does.\n    extra_options: Additional configuration as JSON string.\n    """\n    import json\n\n    if not component_type or not name:\n        return "Error: Both \'component_type\' and \'name\' are required."\n\n    # Parse extra options if provided\n    options = {}\n    if extra_options:\n        try:\n            options = json.loads(extra_options)\n        except json.JSONDecodeError:\n            pass  # Use empty options if parsing fails\n\n    # Clean the name to be a valid Python class name\n    class_name = self._to_class_name(name)\n    snake_name = self._to_snake_case(name)\n    desc = description or f"A {component_type} for {name}"\n\n    generators = {\n        "agent": self._generate_agent,\n        "tool": self._generate_tool,\n        "retrieval_tool": self._generate_retrieval_tool,\n        "faq": self._generate_faq,\n        "fixed_response": self._generate_fixed_response,\n        "lesson": self._generate_lesson,\n        "topic": self._generate_topic,\n        "metadata_config": self._generate_metadata_config,\n        "ingestion_config": self._generate_ingestion_config,\n        "retrieval": self._generate_retrieval,\n    }\n\n    generator = generators.get(component_type.lower())\n    if not generator:\n        valid_types = ", ".join(generators.keys())\n        return f"Error: Unknown component type \'{component_type}\'. Valid types are: {valid_types}"\n\n    code = generator(class_name, snake_name, desc, options)\n\n    return f"## Generated {component_type.replace(\'_\', \' \').title()} Code\\n\\n```python\\n{code}\\n```\\n\\n**Next steps:**\\n{self._get_next_steps(component_type, class_name, snake_name)}"', entity='tools', scope='fields'),
    ]
